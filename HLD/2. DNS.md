### DNS
Domain Name System (DNS) is a hierarchical and decentralized naming system for computers, services, or other resources connected to the internet or a private network. 

It translates human-readable domain names (like www.example.com) into machine-readable IP addresses (like 19.871.111.212) that computers use to identify each other on the network.

üß© The 5 REAL Categories of DNS

1Ô∏è‚É£ DNS by Function / Role

    Who answers and who searches

| Type              | What it means                                                                                                    | Needed in HLD?        |
| ----------------- |------------------------------------------------------------------------------------------------------------------| --------------------- |
| Forward DNS       | Name ‚Üí IP                                                                                                        | ‚úÖ Yes                 |
| Reverse DNS       | IP ‚Üí Name (PTR)                                                                                                  | ‚ùå Usually No          |
| Authoritative DNS | Final source of truth for a domain <br/> stores the actual DNS records for a domain and gives definitive answers | ‚úÖ Yes                 |
| Recursive DNS     | Finds answers for client                                                                                         | ‚ö†Ô∏è Mention implicitly |
| Caching DNS       | Once a recursive resolver gets an answer, it stores (caches) it for a period defined by TTL (Time To Live).      | ‚ö†Ô∏è Implicit           |

Only explicitly design Authoritative DNS. Recursive & caching are assumed.

The recursive resolver then:
1. Asks root servers
2. Then TLD servers (.com)
3. Then the authoritative server for example.com
4. Returns the final answer to you

| Type                  | Purpose                |
| --------------------- | ---------------------- |
| **Authoritative DNS** | Knows the real answers |
| **Recursive DNS**     | Finds the answers      |
| **Caching DNS**       | Remembers the answers  |


2Ô∏è‚É£ DNS by Network Scope

    Who can access it

| Type              | Meaning             | Needed in HLD?        |
| ----------------- | ------------------- | --------------------- |
| Public DNS        | Internet-facing     | ‚úÖ Yes                 |
| Private DNS       | Internal services   | ‚úÖ Yes (microservices) |
| Split-horizon DNS | Internal ‚â† External | ‚ö†Ô∏è Sometimes          |
| mDNS              | Local LAN only      | ‚ùå No (consumer tech)  |

Public + Private DNS are common. mDNS is not used in cloud HLD.

3Ô∏è‚É£ DNS by Routing / Traffic Control

    How traffic is distributed

| Type               | Meaning                                                                                                      | Needed in HLD?     |
|--------------------|--------------------------------------------------------------------------------------------------------------|--------------------|
| Load-balancing DNS | Multiple IPs                                                                                                 | ‚ö†Ô∏è Sometimes       |
| GeoDNS             | Returns different IP addresses based on user location <br/>If you only have one server, GeoDNS adds no value | ‚ö†Ô∏è Large scale     |
| Anycast DNS        | Same IP everywhere                                                                                           | ‚ö†Ô∏è Provider detail |
| Failover DNS       | Health-based routing                                                                                         | ‚ö†Ô∏è HA systems      |
| Weighted DNS       | % traffic split                                                                                              | ‚ùå Optional         |

GeoDNS or Failover DNS only for large-scale systems.

1Ô∏è‚É£ GeoDNS (Geographic DNS)

**What it does**

    GeoDNS returns different IP addresses based on user location.

**Example:**

1. User from India ‚Üí IP in Mumbai
2. User from Europe ‚Üí IP in Frankfurt
3. User from US ‚Üí IP in Virginia

**Why it‚Äôs used**

üåê Lower latency

üöÄ Faster page loads

üåç Regional traffic handling

üß± Regulatory / data-residency needs

2Ô∏è‚É£ Failover DNS

**What it does**

    Failover DNS switches traffic when a service goes down.

**Example:**

Primary: 203.0.113.10

Secondary: 198.51.100.10

    If primary fails:    
    DNS automatically returns secondary IP

**Why it‚Äôs valuable**

üí• Handles server/region failure

üîÑ Improves availability

üõë Reduces downtime

‚ùå GeoDNS for small systems ‚Üí usually overkill

If:
* One region
* Few users
* No latency complaints

Then GeoDNS = extra cost, extra complexity

‚úÖ Failover DNS can make sense even for small setups

Example:
* Primary server
* Backup server
* Low TTL (30‚Äì60 seconds)

Even small businesses use:
* Primary ‚Üí Cloud VM
* Secondary ‚Üí DR server

So:

    Failover DNS ‚â† only big systems

üëç Important limitation to remember (interview gold ‚≠ê)

‚ö†Ô∏è DNS is not instant failover

Because of:
* DNS caching
* TTL values

Even with failover DNS:
* Some users may still hit a dead IP
* Load balancers handle faster failover

So DNS failover is usually:

    Last line of defense, not the first

4Ô∏è‚É£ DNS by Update & Discovery

    How dynamic systems work

| Type                  | Meaning              | Needed in HLD?  |
| --------------------- | -------------------- | --------------- |
| Dynamic DNS           | Auto-updated IPs     | ‚ùå Rare in prod  |
| Service Discovery DNS | Microservices lookup | ‚úÖ Kubernetes    |
| SRV Records           | Service + port       | ‚ö†Ô∏è Some systems |
| NAPTR                 | Advanced discovery   | ‚ùå Niche (telco) |

5Ô∏è‚É£ DNS by Security

    Trust & verification

| Type      | Meaning                | Needed in HLD?      |
| --------- | ---------------------- | ------------------- |
| DNSSEC    | Signed DNS records     | ‚ö†Ô∏è Enterprise       |
| CAA       | Cert authority control | ‚ö†Ô∏è Security mention |
| TLSA / DS | DNSSEC/DANE            | ‚ùå Very advanced     |

DNSSEC enabled for protection against spoofing

üß± Minimal HLD (Most Systems)

    Client
    ‚Üí Public DNS (Authoritative, Geo-enabled)
    ‚Üí CDN
    ‚Üí Load Balancer

üè¢ Enterprise HLD

    Public Authoritative DNS (Geo / Failover)
    Private DNS (Service Discovery)
    DNSSEC Enabled
    Reasonable TTL Strategy
